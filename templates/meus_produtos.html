<!DOCTYPE html>
<html lang="pt-br" class="dark-style layout-navbar-fixed layout-menu-fixed layout-menu-collapsed" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Afiliado</title>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://app.iexperience-app.com/assets/vuexy/vendor/css/rtl/core.css" />
    <link rel="stylesheet" href="https://app.iexperience-app.com/assets/vuexy/vendor/css/rtl/theme-default.css" />
    <link href="https://app.iexperience-app.com/assets/vuexy/css/demo.css" rel="stylesheet" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

    <style>
        :root {
            --primary-platform: #8E55EA;
            --secondary-platform: #EEE3FF;
            --primary-platform-shadow: #EFE5FF;
            --bg-menu-theme: #141718;
            --bg-menu-color: #E8ECEF;
            --navbar: #f8f7fa;
        }

        body {
            font-family: 'Public Sans', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
        }

        /* Barra lateral (sidebar) */
/* Barra lateral (sidebar) */
.sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 60px; /* Largura inicial do painel lateral */
    height: 100%;
    background-color: var(--bg-menu-theme);
    padding-top: 20px;
    padding-left: 10px;
    transition: width 0.3s ease;
    z-index: 1000; /* Fica acima de todos os outros elementos */
}

.sidebar.expanded {
    width: 250px; /* Largura expandida do painel lateral */
}

.sidebar ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.sidebar li {
    padding: 15px 0;
    border-bottom: 1px solid #ccc;
}

.sidebar a {
    color: var(--bg-menu-color);
    text-decoration: none;
    font-size: 18px;
    display: flex;
    align-items: center;
}

.sidebar a i {
    margin-right: 10px; /* Espaço entre ícone e texto */
}

.sidebar a:hover {
    background-color: #444;
    color: white;
}

.sidebar .active {
    background-color: var(--primary-platform);
    color: white;
}

/* Logo no topo da barra lateral */
.sidebar .logo-container {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

.sidebar .logo-container img {
    width: 40px;
    height: 40px;
    object-fit: contain;
}

/* Efeito de expansão (hover) */
.sidebar:hover {
    width: 250px; /* Largura expandida ao passar o mouse */
}

.sidebar ul li a span {
    display: none; /* Ocultar o nome inicialmente */
}

.sidebar.expanded ul li a span {
    display: inline-block; /* Mostrar o nome quando expandido */
}

/* Ajustes para o conteúdo da página */
.content {
    margin-left: 0; /* Sem margem à esquerda */
    padding: 20px;
    flex-grow: 1;
    transition: margin-left 0.3s ease;
    z-index: 1; /* Garante que o conteúdo fique atrás do painel lateral */
}

/* Ajuste de sobreposição: O conteúdo não se move, mas o painel lateral se sobrepõe */
.sidebar.expanded + .content {
    position: relative;
    z-index: -1; /* Coloca o conteúdo atrás do menu lateral */
}




        .menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: #F8F7FA;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 90px;
            color: white;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }

        .logo-left img {
            height: 80px;
        }

        .logo-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-right img {
            height: 60px;
        }

        .logo-right span {
            font-size: 20px;
            font-weight: bold;
            color: #22273F;
        }

        .banner {
            margin: 100px auto 20px;
            max-width: 90%;
            display: flex;
            justify-content: center;
        }

        .banner img {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        .container {
            padding: 20px;
            max-width: 92%;
            margin: 0 auto;
        }

        h1, h2, h3 {
            color: var(--primary-platform);
            font-weight: 600;
        }

        .user-info {
            background-color: #FFFFFF; /* Nova cor de fundo */
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .info-item {
            margin: 10px 0;
        }

        .info-item strong {
            color: var(--primary-platform);
        }

        .dashboard {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap; /* Evita que quebrem em telas menores */
            gap: 20px; /* Adiciona espaçamento entre os itens */
            
            
        }

        .dashboard-item {
            flex: 1; /* Faz com que os itens tenham o mesmo tamanho */
            width: 30%;
            background-color: #FFFFFF; /* Nova cor de fundo */
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .dashboard-item h3 {
            color: var(--primary-platform);
        }

        .dashboard-item p {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-platform);
        }

        .saldo-disponivel {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .btn-saque {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .btn-saque:hover {
            background-color: #2980b9;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            padding-top: 60px;
        }

        .modal-conteudo {
            background-color: #fff;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            width: 50%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-confirmar {
            background-color: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .btn-confirmar:hover {
            background-color: #2ecc71;
        }

        .btn-fechar {
            background-color: #e74c3c;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }

        .btn-fechar:hover {
            background-color: #c0392b;
        }

        .indications-list {
            margin-top: 30px;
        }

        .indication-item {
            background-color: #FFFFFF; /* Nova cor de fundo */
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .status-comprou {
            color: green;
        }

        .status-nao-comprou {
            color: red;
        }

        /* Estilo para as imagens dos produtos */
.product-image {
    width: 100px; /* Largura fixa */
    height: 100px; /* Altura fixa */
    object-fit: cover; /* Garante que a imagem cubra o espaço sem distorcer */
    border-radius: 8px; /* Bordas arredondadas */
    border: 1px solid #ddd; /* Borda sutil */
}

/* Ajustes para a tabela */
.table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

.table th, .table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
}

.table th {
    background-color: var(--primary-platform);
    color: white;
}

.table tr:hover {
    background-color: #f5f5f5;
}

/* Ajustes para o botão de editar */
.btn-editar {
    background-color: var(--primary-platform);
    color: white;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.btn-editar:hover {
    background-color: #7c4dff;
}

    </style>
</head>
<body>

    <!-- Barra lateral -->
    <!-- Barra lateral -->
<nav class="sidebar">
    <!-- Logo no topo -->
    <div class="logo-container">
        <img src="https://eronex.store/iex.png" alt="Logo">
    </div>
    <!-- Menu -->
    <ul>
        <li><a href="{{ url_for('painel') }}"><i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
        <li><a href="{{ url_for('saque') }}"><i class="fas fa-money-bill-wave"></i><span>Saque</span></a></li>
        <li><a href="{{ url_for('relatorios') }}"><i class="fas fa-chart-line"></i><span>Relatórios</span></a></li>
        <li><a href="{{ url_for('cadastrar_produtos') }}"><i class="fas fa-box"></i><span>Cadastrar Produtos</span></a></li>
        <li><a href="{{ url_for('meus_produtos') }}"><i class="fas fa-cogs"></i><span>Meus Produtos</span></a></li>
        <li><a href="{{ url_for('minhas_compras') }}"><i class="fas fa-shopping-cart"></i><span>Minhas Compras</span></a></li>
        <li><a href="{{ url_for('minhas_afiliacoes') }}"><i class="fas fa-users"></i><span>Minhas Afiliações</span></a></li>
        <li><a href="{{ url_for('minhas_coproducoes') }}"><i class="fas fa-project-diagram"></i><span>Minhas Coproduções</span></a></li>
        <li><a href="{{ url_for('webhooks') }}"><i class="fas fa-plug"></i><span>Webhooks</span></a></li>
    </ul>
    
</nav>


    <!-- Conteúdo principal -->
    <div class="content">
        <header class="menu">
            <div class="logo-left">
                <img src="https://app.iexperience-app.com/img/logo-name-iex.png" alt="Logo Esquerda">
            </div>
            <div class="logo-right">
                <span>Olá, {{ nome }}</span>
                <img src="https://app.iexperience-app.com/assets/img/avatars/14.png" alt="Logo Direita">
            </div>
        </header>
        
        <div class="container mt-5">
            <h1 class="mb-4">Meus Produtos</h1>
            <table class="table">
                <thead>
                    <tr>
                        <th>Código</th> <!-- Nova coluna para o código do produto -->
                        <th>Foto</th>
                        <th>Nome</th>
                        <th>Descrição</th>
                        <th>Preço</th>
                        <th>Link de Afiliado</th>
                        <th>Data de Cadastro</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody id="produtos">
                    <!-- Produtos serão preenchidos aqui via JavaScript -->
                </tbody>
            </table>
        </div>

    <script>
        const sidebar = document.querySelector('.sidebar');
        
        // Adicionar a classe expanded ao passar o mouse
        sidebar.addEventListener('mouseenter', () => {
            sidebar.classList.add('expanded');
        });
        
        // Remover a classe expanded quando o mouse sair
        sidebar.addEventListener('mouseleave', () => {
            sidebar.classList.remove('expanded');
        });
    </script>


<script>
    // JavaScript para carregar os produtos
    fetch('/meus_produtos_json')
    .then(response => response.json())
    .then(data => {
        const tbody = document.getElementById('produtos');
        data.forEach(produto => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${produto.id}</td> <!-- Exibe o código do produto -->
                <td><img src="/static/${produto.foto}" alt="${produto.nome}" class="product-image"></td>
                <td>${produto.nome}</td>
                <td>${produto.descricao}</td>
                <td>R$ ${produto.preco.toFixed(2)}</td>
                <td><a href="${produto.link_afiliado}" target="_blank">Link</a></td>
                <td>${produto.data_cadastro}</td>
                <td>
                    <button onclick="editarProduto(${produto.id})" class="btn-editar">Editar</button>
                </td>
            `;
            tbody.appendChild(row);
        });
    })
    .catch(error => {
        console.error('Erro:', error);
    });

    function editarProduto(produto_id) {
    window.location.href = `/editar_produto/${produto_id}`;
}
</script>
    
    

</body>
</html>
